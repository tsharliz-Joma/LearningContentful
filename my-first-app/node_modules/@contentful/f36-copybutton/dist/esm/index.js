import u, { useState, useCallback } from 'react';
import { CopyIcon } from '@contentful/f36-icons';
import { Tooltip } from '@contentful/f36-tooltip';
import { Button } from '@contentful/f36-button';
import { cx, css } from 'emotion';

var S=Object.defineProperty,D=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var P=(t,o,e)=>o in t?S(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))b.call(o,e)&&P(t,e,o[e]);if(c)for(var e of c(o))v.call(o,e)&&P(t,e,o[e]);return t},C=(t,o)=>D(t,L(o));var g=(t,o)=>{var e={};for(var r in t)b.call(t,r)&&o.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&c)for(var r of c(t))o.indexOf(r)<0&&v.call(t,r)&&(e[r]=t[r]);return e};var h=(t,o,e)=>new Promise((r,i)=>{var p=n=>{try{s(e.next(n));}catch(a){i(a);}},l=n=>{try{s(e.throw(n));}catch(a){i(a);}},s=n=>n.done?r(n.value):Promise.resolve(n.value).then(p,l);s((e=e.apply(t,o)).next());});var T=({size:t})=>{let o=t==="small"?"32px":"40px";return {button:css({height:o,minHeight:"auto",minWidth:"auto",width:o})}};function E(q,k){var B=q,{className:t,isDisabled:o=!1,isLoading:e=!1,label:r,onBlur:i,onCopy:p,size:l="medium",testId:s="cf-ui-copy-button",tooltipCopiedText:n="Copied!",tooltipProps:a,tooltipText:H="Copy to clipboard",value:m}=B,w=g(B,["className","isDisabled","isLoading","label","onBlur","onCopy","size","testId","tooltipCopiedText","tooltipProps","tooltipText","value"]);let I=T({size:l}),[d,x]=useState(!1),M=useCallback(()=>h(this,null,function*(){try{yield window.navigator.clipboard.writeText(m);}catch(y){console.error(y);return}p==null||p(m),x(!0);}),[p,m]),z=y=>{d&&x(!1),i==null||i(y);};return u.createElement(Tooltip,C(f({content:d?n:H},a),{isDisabled:o}),u.createElement(Button,C(f({"aria-label":d?"Value copied to clipboard":r!=null?r:"Copy to clipboard","aria-live":"assertive",className:cx(I.button,t),isDisabled:e||o,isLoading:e,onBlur:z,testId:s},w),{onClick:M,ref:k,startIcon:u.createElement(CopyIcon,{variant:"muted",size:l==="small"?"tiny":"small"}),variant:"secondary"})))}E.displayName="CopyButton";var j=u.forwardRef(E);

export { j as CopyButton };
//# sourceMappingURL=index.js.map