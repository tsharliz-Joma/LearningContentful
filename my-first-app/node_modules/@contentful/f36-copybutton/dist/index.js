'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var u = require('react');
var f36Icons = require('@contentful/f36-icons');
var f36Tooltip = require('@contentful/f36-tooltip');
var f36Button = require('@contentful/f36-button');
var emotion = require('emotion');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var u__default = /*#__PURE__*/_interopDefaultLegacy(u);

var S=Object.defineProperty,D=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var P=(t,o,e)=>o in t?S(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))b.call(o,e)&&P(t,e,o[e]);if(c)for(var e of c(o))v.call(o,e)&&P(t,e,o[e]);return t},C=(t,o)=>D(t,L(o));var g=(t,o)=>{var e={};for(var r in t)b.call(t,r)&&o.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&c)for(var r of c(t))o.indexOf(r)<0&&v.call(t,r)&&(e[r]=t[r]);return e};var h=(t,o,e)=>new Promise((r,i)=>{var p=n=>{try{s(e.next(n));}catch(a){i(a);}},l=n=>{try{s(e.throw(n));}catch(a){i(a);}},s=n=>n.done?r(n.value):Promise.resolve(n.value).then(p,l);s((e=e.apply(t,o)).next());});var T=({size:t})=>{let o=t==="small"?"32px":"40px";return {button:emotion.css({height:o,minHeight:"auto",minWidth:"auto",width:o})}};function E(q,k){var B=q,{className:t,isDisabled:o=!1,isLoading:e=!1,label:r,onBlur:i,onCopy:p,size:l="medium",testId:s="cf-ui-copy-button",tooltipCopiedText:n="Copied!",tooltipProps:a,tooltipText:H="Copy to clipboard",value:m}=B,w=g(B,["className","isDisabled","isLoading","label","onBlur","onCopy","size","testId","tooltipCopiedText","tooltipProps","tooltipText","value"]);let I=T({size:l}),[d,x]=u.useState(!1),M=u.useCallback(()=>h(this,null,function*(){try{yield window.navigator.clipboard.writeText(m);}catch(y){console.error(y);return}p==null||p(m),x(!0);}),[p,m]),z=y=>{d&&x(!1),i==null||i(y);};return u__default["default"].createElement(f36Tooltip.Tooltip,C(f({content:d?n:H},a),{isDisabled:o}),u__default["default"].createElement(f36Button.Button,C(f({"aria-label":d?"Value copied to clipboard":r!=null?r:"Copy to clipboard","aria-live":"assertive",className:emotion.cx(I.button,t),isDisabled:e||o,isLoading:e,onBlur:z,testId:s},w),{onClick:M,ref:k,startIcon:u__default["default"].createElement(f36Icons.CopyIcon,{variant:"muted",size:l==="small"?"tiny":"small"}),variant:"secondary"})))}E.displayName="CopyButton";var j=u__default["default"].forwardRef(E);

exports.CopyButton = j;
//# sourceMappingURL=index.js.map