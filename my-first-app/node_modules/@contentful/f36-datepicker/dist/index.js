'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var d = require('react');
var dateFns = require('date-fns');
var emotion = require('emotion');
var n = require('@contentful/f36-tokens');
var reactDayPicker = require('react-day-picker');
var f36Core = require('@contentful/f36-core');
var f36Typography = require('@contentful/f36-typography');
var f36Popover = require('@contentful/f36-popover');
var ue = require('react-focus-lock');
var f36Forms = require('@contentful/f36-forms');
var f36Button = require('@contentful/f36-button');
var f36Icons = require('@contentful/f36-icons');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var d__default = /*#__PURE__*/_interopDefaultLegacy(d);
var n__default = /*#__PURE__*/_interopDefaultLegacy(n);
var ue__default = /*#__PURE__*/_interopDefaultLegacy(ue);

var J=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?J(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&M(e,o,t[o]);if(x)for(var o of x(t))W.call(t,o)&&M(e,o,t[o]);return e},P=(e,t)=>K(e,Q(t));var S=(e,t)=>{var o={};for(var i in e)z.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(e!=null&&x)for(var i of x(e))t.indexOf(i)<0&&W.call(e,i)&&(o[i]=e[i]);return o};var F=()=>({calendar:emotion.css({padding:n__default["default"].spacingM})});var H=40,g=()=>({vhidden:emotion.css({boxSizing:"border-box",padding:"0",margin:"0",background:"transparent",border:"0",MozAppearance:"none",WebkitAppearance:"none",appearance:"none",position:"absolute",top:"0",width:"1px",height:"1px",overflow:"hidden",clip:"rect(1px, 1px, 1px, 1px)"}),button_reset:emotion.css({appearance:"none",position:"relative",margin:0,padding:0,border:"none",outline:"none",background:"none"}),button:emotion.css({borderRadius:"50%",cursor:"pointer",color:n__default["default"].gray900,"&.rdp-day_disabled":{color:n__default["default"].gray400,pointerEvents:"none"},"&:focus, &:active":{boxShadow:n__default["default"].glowPrimary},"&:focus:not(:focus-visible)":{boxShadow:"unset"},"&:hover":{backgroundColor:n__default["default"].gray200},"&.rdp-day_selected:not(.rdp-day_disabled)":{backgroundColor:n__default["default"].blue600,color:n__default["default"].colorWhite,fontWeight:n__default["default"].fontWeightDemiBold}}),months:emotion.css({display:"flex"}),month:emotion.css({width:"100%",margin:"0 1em","&:first-child":{marginLeft:0},"&:last-child":{marginRight:0}}),table:emotion.css({width:"100%",margin:0,borderCollapse:"collapse"}),caption:emotion.css({position:"relative",padding:0,textAlign:"left",".rdp-multiple_months &":{display:"block",textAlign:"center"}}),caption_dropdowns:emotion.css({position:"relative",display:"inline-flex"}),caption_label:emotion.css({position:"relative",zIndex:1,display:"inline-flex",alignItems:"center",margin:"0",padding:`0 ${n__default["default"].spacingXs}`,height:"2rem",whiteSpace:"nowrap",fontSize:n__default["default"].fontSizeM,fontWeight:n__default["default"].fontWeightMedium,borderRadius:n__default["default"].borderRadiusMedium,"& + &":{marginLeft:"3px"}}),nav:emotion.css({whiteSpace:"nowrap",".rdp-multiple_months .rdp-caption_start &":{position:"absolute",top:"50%",left:"0",transform:"translateY(-50%)"},".rdp-multiple_months .rdp-caption_end &":{position:"absolute",top:"50%",right:"0",transform:"translateY(-50%)"}}),nav_button:emotion.css({width:"2rem",height:"2rem",display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"}),nav_button_previous:emotion.css({marginRight:"3px"}),dropdown_month:emotion.css({position:"relative",display:"inline-flex",alignItems:"center"}),dropdown_year:emotion.css({position:"relative",display:"inline-flex",alignItems:"center"}),dropdown:emotion.css({appearance:"none",position:"absolute",zIndex:2,top:"0",bottom:"0",left:"0",width:"100%",margin:"0",padding:"0",cursor:"pointer",opacity:"0",border:"none",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit","&:focus:not([disabled]) + div, &:active:not([disabled]) + div":{boxShadow:n__default["default"].glowPrimary},"&:hover:not([disabled]) + div, &:hover:not([disabled]) + div":{backgroundColor:n__default["default"].gray200}}),dropdown_icon:emotion.css({marginLeft:"8px"}),head:emotion.css({border:0}),head_row:emotion.css({height:"100%"}),row:emotion.css({height:"100%"}),head_cell:emotion.css({verticalAlign:"middle",fontSize:n__default["default"].fontSizeS,fontWeight:n__default["default"].fontWeightDemiBold,textAlign:"center",height:"32px",color:n__default["default"].gray600}),tbody:emotion.css({border:0}),tfoot:emotion.css({margin:"0.5em"}),cell:emotion.css({padding:"2px",textAlign:"center"}),day:emotion.css({display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",width:`${H/16}rem`,height:`${H/16}rem`,borderRadius:"50%",margin:"auto","&.rdp-day_today:not(.rdp-day_outside)":{fontWeight:n__default["default"].fontWeightDemiBold},"&.rdp-day_today:not(.rdp-day_outside):not(.rdp-day_selected):not(:hover)":{backgroundColor:n__default["default"].blue100}}),nav_icon:emotion.css({width:"0.625rem"})});var A=e=>{let t=g(),{fromDate:o,toDate:i,numberOfMonths:c}=reactDayPicker.useDayPicker(),s=Boolean(o&&i&&c===1);return d__default["default"].createElement(f36Core.Flex,{alignItems:"center",justifyContent:"space-between",className:t.caption},s&&d__default["default"].createElement(reactDayPicker.CaptionDropdowns,p({},e)),d__default["default"].createElement(reactDayPicker.CaptionNavigation,p({},e)))};var E=e=>{let t=g(),{fromDate:o,toDate:i,formatters:{formatCaption:c},locale:s,numberOfMonths:u}=reactDayPicker.useDayPicker(),l=Boolean(o&&i&&u===1);return d__default["default"].createElement(f36Typography.Heading,{as:"h2","aria-live":"polite","aria-atomic":"true",id:e.id,className:emotion.cx(t.caption_label,l&&t.vhidden)},c(e.displayMonth,{locale:s}))};function V(e){var o;let t=g();return d__default["default"].createElement(reactDayPicker.DayPicker,P(p({},e),{weekStartsOn:(o=e.weekStartsOn)!=null?o:1,classNames:t,components:p({Caption:A,CaptionLabel:E},e.components)}))}function be(e){let t=F(),L=e,{testId:o="cf-ui-datepicker",className:i,style:c,inputProps:s,popoverProps:u,selected:l,onSelect:m,fromDate:f,toDate:b,locale:k,dateFormat:y="dd LLL yyyy",defaultIsOpen:j}=L,$=S(L,["testId","className","style","inputProps","popoverProps","selected","onSelect","fromDate","toDate","locale","dateFormat","defaultIsOpen"]),h=d.useCallback(a=>!(!dateFns.isValid(a)||f&&dateFns.startOfDay(f).getTime()>a.getTime()||b&&a.getTime()>dateFns.endOfDay(b).getTime()),[f,b]),D=d.useCallback(a=>dateFns.parse(a,y,new Date,{locale:k}),[k,y]),[G,w]=d.useState(j),[v,I]=d.useState(()=>l?dateFns.format(l,y):"");d.useEffect(()=>{if(!l){I("");return}l.getTime()!==D(v).getTime()&&I(dateFns.format(l,y));},[l]);let U=d.useCallback(a=>{I(a.currentTarget.value);let O=D(a.currentTarget.value);h(O)?m(O):m(void 0);},[m,D,h]),X=d.useCallback(a=>{a&&h(a)&&(m(a),w(!1));},[m,h]),q=v&&!h(D(v));return d__default["default"].createElement(f36Popover.Popover,p({isOpen:G,onClose:()=>w(!1)},u),d__default["default"].createElement(f36Popover.Popover.Trigger,null,d__default["default"].createElement(De,{className:i,style:c,testId:o,isDisabled:s==null?void 0:s.isDisabled,onTriggerClick:()=>{w(a=>!a);}},d__default["default"].createElement(f36Forms.TextInput,p({placeholder:dateFns.format(new Date,y),value:v,onChange:U,isInvalid:(s==null?void 0:s.isInvalid)||q,"aria-label":"Enter date",testId:"cf-ui-datepicker-input"},s)))),d__default["default"].createElement(f36Popover.Popover.Content,null,d__default["default"].createElement(ue__default["default"],{returnFocus:!0},d__default["default"].createElement(V,P(p({},$),{className:t.calendar,mode:"single",selected:l,onSelect:X,initialFocus:!1,defaultMonth:l,fromDate:f,toDate:b,locale:k})))))}var De=d__default["default"].forwardRef((e,t)=>{let f=e,{children:o,testId:i,style:c,className:s,onTriggerClick:u,isDisabled:l}=f,m=S(f,["children","testId","style","className","onTriggerClick","isDisabled"]);return d__default["default"].createElement(f36Forms.TextInput.Group,{ref:t,className:s,style:c,testId:i},o,d__default["default"].createElement(f36Button.IconButton,p({"aria-label":"Use calendar",variant:"secondary",icon:d__default["default"].createElement(f36Icons.CalendarIcon,{"aria-label":"calendar"}),onClick:u,isDisabled:l,testId:"cf-ui-datepicker-button"},m)))});

Object.defineProperty(exports, 'Day', {
	enumerable: true,
	get: function () { return reactDayPicker.Day; }
});
Object.defineProperty(exports, 'DayContent', {
	enumerable: true,
	get: function () { return reactDayPicker.DayContent; }
});
Object.defineProperty(exports, 'useDayPicker', {
	enumerable: true,
	get: function () { return reactDayPicker.useDayPicker; }
});
exports.Calendar = V;
exports.Datepicker = be;
//# sourceMappingURL=index.js.map