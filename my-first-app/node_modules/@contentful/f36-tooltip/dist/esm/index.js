import s, { useState, useRef, useEffect } from 'react';
import { usePopper } from 'react-popper';
import { cx, css } from 'emotion';
import i from '@contentful/f36-tokens';
import { Portal } from '@contentful/f36-utils';
import { useId, Box } from '@contentful/f36-core';

var se=Object.defineProperty;var d=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var A=(t,o,e)=>o in t?se(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,y=(t,o)=>{for(var e in o||(o={}))L.call(o,e)&&A(t,e,o[e]);if(d)for(var e of d(o))H.call(o,e)&&A(t,e,o[e]);return t};var K=(t,o)=>{var e={};for(var n in t)L.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&d)for(var n of d(t))o.indexOf(n)<0&&H.call(t,n)&&(e[n]=t[n]);return e};var V=(t,o,e)=>new Promise((n,u)=>{var b=a=>{try{p(e.next(a));}catch(l){u(l);}},h=a=>{try{p(e.throw(a));}catch(l){u(l);}},p=a=>a.done?n(a.value):Promise.resolve(a.value).then(b,h);p((e=e.apply(t,o)).next());});var v=`calc(-1 * ((1rem * (10 / ${i.fontBaseDefault})) / 2))`,j=`calc(1rem * (10 / ${i.fontBaseDefault}))`;function X(){return {tooltipTargetWrapper:css({display:"inline-block",position:"relative"}),tooltip:css({background:i.gray900,fontFamily:i.fontStackPrimary,fontSize:i.fontSizeS,fontWeight:i.fontWeightNormal,fontStyle:"normal",textDecoration:"none",color:i.colorWhite,textAlign:"center",lineHeight:i.lineHeightM,padding:`${i.spacingXs} calc(1rem * (10 / ${i.fontBaseDefault}))`,borderRadius:i.borderRadiusMedium,whiteSpace:"normal",textTransform:"initial",letterSpacing:"initial"}),tooltipHidden:css({visibility:"hidden",pointerEvents:"none",zIndex:i.zIndexNegative}),tooltipContainer:css({"& > button[disabled]":{pointerEvents:"none"}}),tooltipArrow:css({position:"absolute",'&[data-placement*="top"]':{bottom:0,left:0,marginBottom:v},'&[data-placement*="right"]':{left:0,marginLeft:v},'&[data-placement*="bottom"]':{left:0,top:0,marginTop:v},'&[data-placement*="left"]':{right:0,marginRight:v},"&::before":{content:'""',display:"block",height:j,width:j,backgroundColor:i.gray900,transform:"rotate3d(0, 0, 1, 45deg)",zIndex:i.zIndexNegative}})}}var me=ce=>{var N=ce,{children:t,className:o,as:e="span",content:n,id:u,isVisible:b=!1,hideDelay:h=0,onBlur:p,onFocus:a,onMouseLeave:l,onMouseOver:M,onKeyDown:C,showDelay:Q=0,targetWrapperClassName:R,maxWidth:x=360,testId:U="cf-ui-tooltip",placement:Y="auto",usePortal:Z=!1,isDisabled:_=!1}=N,ee=K(N,["children","className","as","content","id","isVisible","hideDelay","onBlur","onFocus","onMouseLeave","onMouseOver","onKeyDown","showDelay","targetWrapperClassName","maxWidth","testId","placement","usePortal","isDisabled"]);let S=X(),[te,f]=useState(b),z=useId(u,"tooltip"),B=useRef(null),I=useRef(null),[oe,ne]=useState(null),{styles:k,attributes:T,update:E}=usePopper(B.current,I.current,{placement:Y,modifiers:[{name:"arrow",options:{element:oe,padding:parseFloat(i.borderRadiusSmall)}},{name:"offset",options:{offset:[0,10]}}]});useEffect(()=>{(()=>V(void 0,null,function*(){E!==null&&(yield E());}))();},[n,E]);let D=useRef(),F=useRef(),m=()=>{clearTimeout(D.current),clearTimeout(F.current);};useEffect(()=>m,[]);let W=()=>{m(),D.current=setTimeout(()=>f(!0),Q);},P=()=>{m(),F.current=setTimeout(()=>f(!1),h);},re=typeof x=="string"?x:`${x}px`,ie=y({zIndex:i.zIndexTooltip,maxWidth:re},k.popper);if(!n||_)return s.createElement(Box,{as:e,className:R},t);let $=s.createElement(Box,y({as:"span",id:z,ref:I,role:"tooltip",style:ie,className:cx(S.tooltip,o),testId:U,onMouseEnter:()=>{m(),f(!0);},onMouseLeave:()=>{m(),f(!1);}},T.popper),s.createElement("span",null,n),s.createElement("span",{className:S.tooltipArrow,"data-placement":T.popper&&T.popper["data-popper-placement"],ref:ne,style:k.arrow}));return s.createElement(s.Fragment,null,te?s.createElement(s.Fragment,null,Z?s.createElement(Portal,null,$):$):null,s.createElement(Box,y({as:e,ref:B,className:cx(S.tooltipContainer,R),onMouseEnter:r=>{W(),M&&M(r);},onMouseLeave:r=>{P(),l&&l(r);},onFocus:r=>{W(),a&&a(r);},onBlur:r=>{P(),p&&p(r);},onKeyDown:r=>{r.key==="Escape"&&P(),C&&C(r);}},ee),s.Children.map(t,r=>{if(s.isValidElement(r))return s.cloneElement(r,{"aria-describedby":z})})))};

export { me as Tooltip };
//# sourceMappingURL=index.js.map