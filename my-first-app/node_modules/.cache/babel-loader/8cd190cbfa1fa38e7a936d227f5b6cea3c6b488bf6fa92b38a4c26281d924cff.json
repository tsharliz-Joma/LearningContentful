{"ast":null,"code":"import $, { useRef, useLayoutEffect } from 'react';\nimport { Box } from '@contentful/f36-core';\nimport { cx, css } from 'emotion';\nimport l from '@contentful/f36-tokens';\nvar D = Object.defineProperty,\n  H = Object.defineProperties;\nvar E = Object.getOwnPropertyDescriptors;\nvar s = Object.getOwnPropertySymbols;\nvar f = Object.prototype.hasOwnProperty,\n  y = Object.prototype.propertyIsEnumerable;\nvar m = (e, o, t) => o in e ? D(e, o, {\n    enumerable: !0,\n    configurable: !0,\n    writable: !0,\n    value: t\n  }) : e[o] = t,\n  u = (e, o) => {\n    for (var t in o || (o = {})) f.call(o, t) && m(e, t, o[t]);\n    if (s) for (var t of s(o)) y.call(o, t) && m(e, t, o[t]);\n    return e;\n  },\n  h = (e, o) => H(e, E(o));\nvar g = (e, o) => {\n  var t = {};\n  for (var n in e) f.call(e, n) && o.indexOf(n) < 0 && (t[n] = e[n]);\n  if (e != null && s) for (var n of s(e)) o.indexOf(n) < 0 && y.call(e, n) && (t[n] = e[n]);\n  return t;\n};\nvar P = _ref => {\n  let {\n    className: e\n  } = _ref;\n  return {\n    collapseWrapper: cx(css({\n      boxSizing: \"border-box\",\n      overflow: \"hidden\",\n      height: 0,\n      display: \"none\",\n      transition: `height ${l.transitionDurationDefault} ${l.transitionEasingDefault}, padding ${l.transitionDurationDefault} ${l.transitionEasingDefault}`\n    }), e)\n  };\n};\nvar I = M => {\n  var a = M,\n    {\n      children: e,\n      className: o,\n      isExpanded: t = !1,\n      testId: n = \"cf-collapse\"\n    } = a,\n    d = g(a, [\"children\", \"className\", \"isExpanded\", \"testId\"]);\n  let i = useRef(null),\n    C = P({\n      className: o\n    }),\n    p = () => {\n      let {\n        current: r\n      } = i;\n      return r ? `${r.scrollHeight}px` : \"0px\";\n    };\n  return useLayoutEffect(() => {\n    let {\n        current: r\n      } = i,\n      c = () => {\n        r && (t ? r.style.setProperty(\"height\", \"auto\") : (r.style.removeProperty(\"pointer-events\"), r.style.setProperty(\"display\", \"none\")));\n      };\n    return r && (r.addEventListener(\"transitionend\", c), requestAnimationFrame(function () {\n      t ? (r.style.setProperty(\"display\", \"block\"), r.style.removeProperty(\"pointer-events\")) : r.style.setProperty(\"pointer-events\", \"none\");\n      let v = t ? \"0px\" : p(),\n        x = t ? p() : \"0px\";\n      r.style.setProperty(\"height\", v), requestAnimationFrame(function () {\n        r.style.setProperty(\"height\", x);\n      });\n    })), () => {\n      r && r.removeEventListener(\"transitionend\", c);\n    };\n  }, [t]), $.createElement(Box, h(u({}, d), {\n    testId: n,\n    role: \"region\",\n    \"aria-hidden\": !t,\n    className: C.collapseWrapper,\n    ref: i\n  }), e);\n};\nexport { I as Collapse };","map":{"version":3,"names":[],"sources":["/Users/tsharliz/Documents/contentful/my-first-app/node_modules/@contentful/f36-collapse/src/Collapse.tsx","/Users/tsharliz/Documents/contentful/my-first-app/node_modules/@contentful/f36-collapse/src/Collapse.styles.ts"],"sourcesContent":["import React, { useLayoutEffect, useRef } from 'react';\nimport {\n  Box,\n  type CommonProps,\n  type PropsWithHTMLElement,\n} from '@contentful/f36-core';\n\nimport { getCollapseStyles } from './Collapse.styles';\n\ninterface CollapseInternalProps extends CommonProps {\n  /**\n   * Child nodes to be rendered in the component\n   */\n  children?: React.ReactNode;\n  /**\n   * A boolean that tells if the accordion should be expanded or collapsed\n   */\n  isExpanded: boolean;\n  /**\n   * string for additional classNames\n   */\n  className?: string;\n}\n\nexport type CollapseProps = PropsWithHTMLElement<CollapseInternalProps, 'div'>;\n\nexport const Collapse = ({\n  children,\n  className,\n  isExpanded = false,\n  testId = 'cf-collapse',\n  ...otherProps\n}: CollapseProps) => {\n  const panelEl = useRef<HTMLDivElement>(null);\n  const styles = getCollapseStyles({ className });\n\n  const getPanelContentHeight = () => {\n    const { current } = panelEl;\n\n    if (!current) {\n      // to keep the function return type as string only and\n      // not overcomplicate things with non-nullable checks\n      return '0px';\n    }\n\n    return `${current.scrollHeight}px`;\n  };\n\n  useLayoutEffect(() => {\n    const { current } = panelEl;\n\n    const handleTransitionEnd = () => {\n      if (current) {\n        if (isExpanded) {\n          current.style.setProperty('height', 'auto');\n        } else {\n          current.style.removeProperty('pointer-events');\n          current.style.setProperty('display', 'none');\n        }\n      }\n    };\n\n    if (current) {\n      current.addEventListener('transitionend', handleTransitionEnd);\n      requestAnimationFrame(function () {\n        if (!isExpanded) {\n          // Don't allow interaction while collapsing\n          current.style.setProperty('pointer-events', 'none');\n        } else {\n          // Overwrite none display to see expanding transition\n          current.style.setProperty('display', 'block');\n          current.style.removeProperty('pointer-events');\n        }\n        // Calculate panel height after removing none display\n        const fromHeight = isExpanded ? '0px' : getPanelContentHeight();\n        const toHeight = isExpanded ? getPanelContentHeight() : '0px';\n        current.style.setProperty('height', fromHeight);\n\n        requestAnimationFrame(function () {\n          current.style.setProperty('height', toHeight);\n        });\n      });\n    }\n\n    return () => {\n      if (current) {\n        current.removeEventListener('transitionend', handleTransitionEnd);\n      }\n    };\n  }, [isExpanded]);\n\n  return (\n    <Box\n      {...otherProps}\n      testId={testId}\n      role=\"region\"\n      aria-hidden={!isExpanded}\n      className={styles.collapseWrapper}\n      ref={panelEl}\n    >\n      {children}\n    </Box>\n  );\n};\n","import { css, cx } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\n\nexport const getCollapseStyles = ({ className }: { className?: string }) => {\n  return {\n    collapseWrapper: cx(\n      css({\n        boxSizing: 'border-box',\n        overflow: 'hidden',\n        height: 0,\n        display: 'none',\n        transition: `height ${tokens.transitionDurationDefault} ${tokens.transitionEasingDefault}, padding ${tokens.transitionDurationDefault} ${tokens.transitionEasingDefault}`,\n      }),\n      className,\n    ),\n  };\n};\n"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}